<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <link rel="icon" href="img/favicon.ico" />
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Open+Sans" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <link rel="stylesheet" href="css/styles.css">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Globoticket</title>
    <!-- Waiting until the DOM is ready:
        
        1. So far, our code has been put at the very bottom of the page, because then we know the page has been rendered, the DOM should be ready, so we can do that. However, now that we know how event handling works, we have better approaches to use, and I will show you how. Let's take the whole script block, and then paste it here in the head block. 

        2. Then I reload the page in the browser, but first I open up the console. So reload, and, oh, it doesn't work. Well, there's some dummy data here, but all of the event handling code is not in effect because we were applying it before the DOM has been fully rendered. For instance, the footer does not show the current year.
    -->
    <script>
        // One event that comes in handy here is the load event. We can set up an event listener, so how about this? Let's import not document, but window, and then addEventListener, because load is a window event, not a document event, and that will become important in a minute. 

        //  So the event name is load and the code we would like to run is, well, basically this whole code here in between the <scrip> tags. 
        window.addEventListener("load", () => {
            // Now the JavaScript code only runs once while the page has been loaded, whatever that means. 

            // In order to be able to show you that, I go to the Network tab and add some throttling, so how about Fast 3G. So it takes a while until everything has been loaded, and now let's give it a try. 
            
            // So I reload the page, and you see, ah, at first the font is missing, now the font is there, but the copyright year is still not there. And slowly the images are loaded. It takes a while, and once the images are fully there and all of the other resources on the page, CSS, etc, etc, then the code runs. 
            
            //  So the load event is fired once the full page is there. In some cases, that's what we want. 
            
            //  However, in our case, we are not interested in all of the images being there, we would like that the functionality, adding elements to the cart, etc, works as soon as possible, and also that the copyright year appears as quickly as possible. 
            
            // And for that, that the DOM is there independent of images, style sheets, and other external resources, for that we have a specific event, and that's called DOMContentLoaded.  
            document.querySelector("footer div").childNodes[1].textContent =
                new Date().getFullYear();
            document.querySelector("footer div").classList.remove("font-xxlarge");
            document.querySelector("footer div").classList.add("font-large");


            let btn = document.querySelector("button");
            btn.addEventListener(
                "click",
                addToCart,
                { once: true });

            function getCartItemCount() {
                let spanTickets = document.getElementById("spanTickets");
                return parseInt(spanTickets.textContent) ?? 0;
            }

            function addToCart() {
                let count = getCartItemCount();
                spanTickets.textContent = count + 1;
            }

            document.querySelector("a[href='./cart.html']").addEventListener(
                "click",
                (e) => {
                    let count = getCartItemCount();
                    if (count === 0) {
                        alert("Cart is empty!");
                        e.preventDefault();
                    }
                }
            )
        });
    </script>
</head>

<body>
    <div id="root">
        <nav class="navbar navbar-expand navbar-dark fixed-top bg-dark">
            <div class="container-fluid">
                <div class="collapse navbar-collapse">
                    <ul class="navbar-nav me-auto ms-3 mb-2 mb-lg-0">
                        <li class="nav-item">
                            <a href="./index.html" class="navbar-brand"><img src="img/logo.png"
                                    alt="Globoticket logo" /></a>
                        </li>
                    </ul>
                </div>
                <div class="collapse navbar-collapse">
                    <ul class="navbar-nav ms-auto me-5 mb-2 mb-lg-0">
                        <li class="nav-item">
                            <a href="./cart.html" class="nav-link">
                                <span class="bi bi-cart-plus-fill text-white font-xxlarge"></span>
                                <span class="font-upper font-bold text-white ms-4">
                                    <span class="font-xxlarge align-middle" id="spanTickets">0</span>
                                    <span class="align-middle ms-2">ticket(s)</span>
                                </span>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
        <div class="container" id="eventtable">
            <div class="container">
                <table class="table mt-5">
                    <thead>
                        <tr>
                            <th scope="col"></th>
                            <th scope="col">Date</th>
                            <th scope="col">Name</th>
                            <th scope="col">Artist</th>
                            <th scope="col">Price</th>
                            <th scope="col"></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="align-middle">
                            <td>
                                <img class="img-fluid max-100" src="img/logos/Container-Enthusiasm-TalkDocker-To-Me.png"
                                    alt="Cover" />
                            </td>
                            <td class="max-50">
                                10/1/2025, 7:00:00 PM
                            </td>
                            <td class="max-50">
                                Talk Docker to Me Tour
                            </td>
                            <td class="max-50">
                                Container Enthusiasm
                            </td>
                            <td class="max-50">
                                $49.99
                            </td>
                            <td class="max-50">
                                <button type="button" class="btn btn-primary btn-primary-themed btn-md font-upper">Add
                                    to Cart</button>
                            </td>
                        </tr>
                        <tr class="align-middle">
                            <td>
                                <img class="img-fluid max-100" src="img/logos/DigitalCowboys_BinaryBovine.png"
                                    alt="Cover" />
                            </td>
                            <td class="max-50">
                                11/1/2025, 7:30:00 PM
                            </td>
                            <td class="max-50">
                                Binary Bovine Tour
                            </td>
                            <td class="max-50">
                                Digital Cowboys
                            </td>
                            <td class="max-50">
                                $59.99
                            </td>
                            <td class="max-50">
                                <button type="button" class="btn btn-primary btn-primary-themed btn-md font-upper">Add
                                    to Cart</button>
                            </td>
                        </tr>
                        <tr class="align-middle">
                            <td>
                                <img class="img-fluid max-100" src="img/logos/GitOuttaMyHub-CodeEmpire.png"
                                    alt="Cover" />
                            </td>
                            <td class="max-50">
                                12/1/2025, 8:00:00 PM
                            </td>
                            <td class="max-50">
                                Code Empire Tour
                            </td>
                            <td class="max-50">
                                Git Outta My Hub
                            </td>
                            <td class="max-50">
                                $39.99
                            </td>
                            <td class="max-50">
                                <button type="button" class="btn btn-primary btn-primary-themed btn-md font-upper">Add
                                    to Cart</button>
                            </td>
                        </tr>
                        <tr class="align-middle">
                            <td>
                                <img class="img-fluid max-100" src="img/logos/Memory-Allocation-The-Cache.png"
                                    alt="Cover" />
                            </td>
                            <td class="max-50">
                                1/15/2026, 8:30:00 PM
                            </td>
                            <td class="max-50">
                                The Cache Tour
                            </td>
                            <td class="max-50">
                                Memory Allocation
                            </td>
                            <td class="max-50">
                                $29.99
                            </td>
                            <td class="max-50">
                                <button type="button" class="btn btn-primary btn-primary-themed btn-md font-upper">Add
                                    to Cart</button>
                            </td>
                        </tr>
                        <tr class="align-middle">
                            <td>
                                <img class="img-fluid max-100"
                                    src="img/logos/Network-Firewall-Squad---For-Those-About-to-Block,-We-Salute-You.png"
                                    alt="Cover" />
                            </td>
                            <td class="max-50">
                                3/8/2026, 8:45:00 PM
                            </td>
                            <td class="max-50">
                                For Those About To Block Tour
                            </td>
                            <td class="max-50">
                                Network Firewall Squad
                            </td>
                            <td class="max-50">
                                $69.99
                            </td>
                            <td class="max-50">
                                <button type="button" class="btn btn-primary btn-primary-themed btn-md font-upper">Add
                                    to Cart</button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <footer class="bg-dark fixed-bottom">
            <div class="text-center text-white font-xxlarge">
                &copy; <span id="copyright-year"></span> Globoticket
            </div>
        </footer>
    </div>
</body>

</html>